platform :android do
    desc "Deploy android"

    #build
    lane :build do
        ionic(
            platform: 'android',
            keystore_path: "./appkey.jks",
            keystore_alias: 'appkey',
            keystore_password: 'chleorjs12@'
        )
    end


    #test(firebase 테스트 앱 전달)
    lane :distribute do
        ionic(
            platform: 'android',
            keystore_path: "./appkey.jks",
            keystore_alias: 'appkey',
            keystore_password: 'chleorjs12@'
        )

        gradle( task: "clean assembleRelease",project_dir: 'platforms/android/')
        firebase_app_distribution(
            app: "1:1009227330529:android:53bbc7ac8f31dcc746d8a0",
            firebase_cli_token:"1//0eIQwBqdtsCTqCgYIARAAGA4SNgF-L9IrRrOK3qbbD7f8gKim2LkmdPX6fVUQrxIuCBTW1ckxiliiqOEicZaSChK-depcYtv-CQ",
            debug: true
        )

    end


    #deploy
    lane :deploy do

    end
end

platform :ios do
    desc "Deploy ios"


    lane :dev do
        ionic(
            platform: 'ios',
            release: false,
            type: 'development',
            team_id: 'Q5GY55X8NG'
        )
    end

    lane :beta do
        increment_build_number(build_number:1.2,xcodeproj:"./platforms/ios/신나는앱.xcodeproj")
        build_app(workspace:"./platforms/ios/신나는앱.xcworkspace")
        pilot( api_key_path: "./fastlane/fastlaneios.json" )
        upload_to_testflight
    end
end